"use strict";define("app/common/util/emitor",[],function(){function t(t,e){return t+"_"+e}function e(e,n,r,o){o=o||0;var c=t(e,n),a=i[c];return a||(a=[],i[c]=a),a.push({callback:r,priority:o}),this}function n(e,n,r){var o=t(e,n),c=i[o];if(!c)return this;for(var a=0;a<c.length;a++){if(c[a].callback==r){c.splice(a,1);break}}return this}function r(e,n){var r=t(e,n),o=i[r];if(!o)return this;o=o.concat().sort(function(t,e){return e.priority-t.priority});for(var c=Array.from(arguments).slice(2),a=0;a<o.length;a++){o[a].callback.apply(this,c)}return this}function o(e,n,o){var i=Array.from(arguments).splice(1),a=this,s=t(n,o),p=c[s];return p&&clearTimeout(p),p=setTimeout(function(){delete c[s],r.apply(a,i)},e),c[s]=p,this}var i={},c={};return{on:e,off:n,trigger:r,delayTrigger:o}}),define("app/common/util/report",[],function(){function t(){window.onerror=n,kenrobot.on("app","error",e,{canReset:!1})}function e(t){kenrobot.postMessage("app:errorReport",t,"AppError")}function n(t,e,n,r,o){kenrobot.appInfo.dev&&o&&console.error(o.stack);o.stack;return t="------ error message ------\n"+o.message+"("+o.src+" at line "+o.line+":"+o.col+")\n"+o.stack,kenrobot.postMessage("app:errorReport",t,"SystemError"),!0}return{init:t}}),define("app/scratch3/config/menu",[],function(){return[{id:"file",placeholder:"文件",menu:[{text:"新建项目",action:"new-project",shortcut:{key:["ctrl+n","command+n"],text:"Ctrl+N"}},"_",{text:"打开项目",action:"open-project",shortcut:{key:["ctrl+o","command+o"],text:"Ctrl+O"}},{text:"保存项目",action:"save-project",shortcut:{key:["ctrl+s","command+s"],text:"Ctrl+S"}},{text:"另存为",action:"save-as-project",shortcut:{key:["ctrl+shift+s","command+shift+s"],text:"Ctrl+Shift+S"}}]},{id:"edit",placeholder:"编辑"},{id:"example",placeholder:"案例"},{id:"options",placeholder:"选项",menu:[{id:"fullscreen",text:"全屏",action:"fullscreen"},{text:"语言",action:"language"},{text:"主题",action:"theme"},"_",{text:"设置",action:"setting"}]},{id:"help",placeholder:"帮助",menu:[{text:"检查更新",action:"check-update"},{text:"啃萝卜官网",action:"visit-kenrobot"},"_",{text:"建议反馈",action:"suggestion"},{text:"关于啃萝卜",action:"about-kenrobot"}]},{id:"version",placeholder:"版本",menu:[{text:"scratch 2",action:"switch",cls:"check",extra:{type:"scratch2"}},{text:"scratch 3",action:"switch",cls:"check",extra:{type:"scratch3"}}]}]}),define("app/scratch3/controller/mainController",["app/common/util/emitor","../config/menu"],function(t,e){function n(){t.on("app","start",r),kenrobot.on("app-menu","do-action",o)}function r(){kenrobot.trigger("app-menu","load",e,"scratch3"),kenrobot.postMessage("app:loadSetting").then(function(e){var n=e[kenrobot.viewType];for(var r in n)t.trigger("setting","change",r,n[r])})}function o(t){kenrobot.trigger("app","command",t)}return{init:n}}),define("app/scratch3/controller/index",["./mainController"],function(t){function e(){t.init()}return{init:e}}),define("app/scratch3/index",["app/common/util/emitor","app/common/util/report","./controller/index"],function(t,e,n){function r(){window.kenrobot=window.kenrobot||top.kenrobot,e.init(),n.init(),t.trigger("app","start")}return{init:r}}),require.config({baseUrl:"../assets/js"}),require(["./app/scratch3/index"],function(t){t.init()}),define("scratch3",function(){});